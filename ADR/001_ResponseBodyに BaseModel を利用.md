# 決定#001: ResponseBody に BaseModel を利用

## ステータス

| 区分 | 日付 | 詳細             |
| ---- | ---- | ---------------- |
| 提案 | --   | 過去の決定のメモ |

## 経緯

レスポンスボディを表す型に BaseModel を用いる。

### 導入経緯

設計時に最も重要視したのは、Twitter API がライブラリの想定していないフィールドのデータを返してきても壊れない仕組みであった。

BaseModel ならば、それが可能だ。

BaseModel は extra のキーを許可することができるので、Twitter API が返してきた値をそのままログに出力し、  
Python スクリプト内では、型安全にフィールドにアクセスすることができる。  

## 代替案

### TypedDict や dataclass

製作の時点で、BaseModel の extra に相当する機能はサポートされていなかった。

dataclass に独自実装することもできたが、内部構造をいじることになるので将来に対する動作の保証ができなかった。

TypeDict の場合さらに問題になるのは、戻り値に対する便利なヘルパーメソッドを定義できない点である。  
ロジックを扱いやすいように、便利なヘルパーメソッドを作ることは将来的に十分考えられるので、 class として扱う必要があった。


## 対応工数

作りながら考えた。 0h

## 作成者

安谷尚人
